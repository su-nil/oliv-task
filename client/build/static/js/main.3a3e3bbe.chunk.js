(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){e.exports=a(167)},166:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(10),o=a.n(i),s=a(23),c=a.n(s),l=a(36),u=a(20),d=a(30),p=a(15),m=a(7),h=a(17),g=a(16),f=a(12),x=a(18),b=a(55),w=a(34),v=a(210),y=a(201),O=a(203),j=a(204),C=a(169),E=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.props.result,a=t.name,n=t.rating,i=t.photos,o=t.address,s=t.review_count,c=t.tags,l=t.price;return r.a.createElement(y.a,{className:e.root,raised:!0},r.a.createElement(O.a,{className:e.details},r.a.createElement("span",{className:e.title},a),r.a.createElement("span",{className:e.ratingPriceContainer},r.a.createElement(v.a,{value:n,precision:.5,size:"small",className:e.rating}),r.a.createElement("span",{className:e.reviewCount},"(",s,")"),r.a.createElement("span",{className:e.price},l)),r.a.createElement("span",{className:e.address},o),r.a.createElement("span",{className:e.tags},c)),r.a.createElement(j.a,{className:e.image,image:i[0],title:a}))}}]),t}(n.Component),R=Object(C.a)({root:{display:"grid",gridTemplateColumns:"75% 25%",width:"100%",margin:"3px 0"},details:{gridColumn:"1 / 2",display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"flex-start","& > *":{marginTop:"5px"},"@media (max-width: 960px)":{"& > *":{marginTop:"2px"}}},ratingPriceContainer:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},title:{fontSize:"16px",fontWeight:500,"@media (max-width: 960px)":{fontSize:"14px"}},price:{fontSize:"14px",color:"grey",marginLeft:"10px",fontWeight:500,"@media (max-width: 960px)":{fontSize:"12px",marginLeft:"5px"}},reviewCount:{fontSize:"14px",color:"grey",marginLeft:"10px","@media (max-width: 960px)":{fontSize:"12px",marginLeft:"3px"}},rating:{"@media (max-width: 960px)":{fontSize:"14px"}},address:{color:"grey",fontSize:"14px","@media (max-width: 960px)":{fontSize:"11px"}},tags:{color:"grey",fontSize:"14px",fontWeight:600,"@media (max-width: 960px)":{fontSize:"12px",fontWeight:600}},image:{gridColumn:"2 / 3",margin:"auto auto auto 0",height:"90%",width:"90%"}})(E),S=a(38),k=a.n(S),N=a(205),T=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.resultsArea!==this.props.resultsArea}},{key:"render",value:function(){var e,t=this.props,a=t.results,n=t.classes;switch(t.resultsArea){case"loading":e=r.a.createElement(N.a,{thickness:5,className:n.loader});break;case"results":e=r.a.createElement("div",{className:n.results},a.map(function(e){return r.a.createElement(R,{result:e,key:k()()})}));break;default:e=r.a.createElement("div",{className:n.startSearch},r.a.createElement("h4",null,"Your search results will appear here..."))}return r.a.createElement("div",{className:n.root},e)}}]),t}(n.Component),z=Object(C.a)({root:{height:"100%",width:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid lightgrey","@media (max-width: 960px)":{border:"none"}},startSearch:{"& h4":{textAlign:"center",color:"grey",fontWeight:300,fontSize:"20px",margin:"20% 20% auto 20%"},"@media (max-width: 600px)":{"& h4":{fontSize:"15px"}}},loader:{alignSelf:"center",margin:"20%","@media (max-width: 600px)":{}},results:{overflow:"scroll"}})(T),M=a(87),L=a.n(M),A=a(88),I=a.n(A),D=function(e){var t=e.text,a=e.classes;return r.a.createElement("div",{className:a.marker},r.a.createElement("span",{className:a.markerText},t),r.a.createElement(I.a,{className:a.markerIcon}))},B=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){var a=e.center,n=a.lat,r=a.lng,i=this.props.center,o=i.lat,s=i.lng;return o!==n||s!==r}},{key:"render",value:function(){var e=this.props,t=e.center,a=e.zoom,n=e.classes,i=e.results,o=e.apiKey,s=i.map(function(e){var t=e.name,a=e.coordinates,i=a.latitude,o=a.longitude;return r.a.createElement(D,{lat:i,lng:o,text:t,key:k()(),classes:n})});return r.a.createElement("div",{className:n.root},r.a.createElement(L.a,{bootstrapURLKeys:{key:o},center:t,zoom:a},s))}}]),t}(n.Component),P=Object(C.a)({root:{width:"100%",height:"100%",borderTop:"1px solid lightgrey"},marker:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"auto",flexWrap:"row wrap"},markerText:{textAlign:"center",fontSize:12,padding:"1px 4px",border:"1px solid grey",borderRadius:"5px",backgroundColor:"white",maxWidth:"9rem",overflowWrap:"normal"},markerIcon:{color:"#cc3333"}})(B),W=a(89),q=a(39),U=a.n(q);function K(e){return new Promise(function(t,a){U.a.get("/autocomplete/".concat(e)).then(function(e){var a=e.data.map(function(e){return{value:e.description,id:e.id}});t(a)}).catch(function(e){return a(e)})})}function _(e){return F.apply(this,arguments)}function F(){return(F=Object(d.a)(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){U.a.get("/search/".concat(t)).then(function(t){var a=t.data;e(a[0])}).catch(function(e){return a(e)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=a(90),Y=a.n(H),G=a(91),V=a.n(G),J=a(92),Q=a.n(J),X=a(209),Z=a(214),$=a(168),ee=a(206),te=a(97),ae=a.n(te),ne=a(4);function re(e){var t=e.classes,a=e.inputRef,n=void 0===a?function(){}:a,i=e.ref,o=Object(W.a)(e,["classes","inputRef","ref"]);return r.a.createElement(X.a,Object.assign({fullWidth:!0,variant:"outlined",InputProps:{inputRef:function(e){i(e),n(e)},classes:{input:t.input}}},o))}function ie(e){return e.value}function oe(e,t){var a=t.query,n=t.isHighlighted,i=ie(e),o=V()(i,a),s=Q()(i,o);return r.a.createElement(Z.a,{selected:n,component:"div"},r.a.createElement("div",null,s.map(function(e){return r.a.createElement("span",{key:k()(),style:{fontWeight:e.highlight?500:400}},e.text)})))}var se=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).onSuggestionsFetchRequested=function(){var e=Object(d.a)(c.a.mark(function e(t){var n,r,i,o,s,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.value,e.next=3,Object(w.a)(K(n));case 3:if(s=e.sent,d=Object(l.a)(s,2),i=d[0],o=d[1]){e.next=15;break}return r="Google Maps Autosuggest API not working.",console.error(i),console.log("ERROR:",r),a.props.handleErrorChange(r),e.abrupt("return");case 15:a.setState(function(e){return Object(u.a)({},e,{suggestions:o})});case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.onSuggestionsClearRequested=function(){a.setState(function(e){return Object(u.a)({},e,{suggestions:[]})})},a.onChange=function(e,t){var n=t.newValue;a.setState(function(e){return Object(u.a)({},e,{value:n})})},a.state={value:"",suggestions:[]},a.handleSubmit=a.handleSubmit.bind(Object(f.a)(a)),a}return Object(x.a)(t,e),Object(m.a)(t,[{key:"handleSubmit",value:function(){var e=Object(d.a)(c.a.mark(function e(t){var a,n,r,i,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.value,this.setState(function(e){return Object(u.a)({},e,{value:""})}),e.next=5,Object(w.a)(_(a));case 5:if(o=e.sent,s=Object(l.a)(o,2),r=s[0],i=s[1]){e.next=15;break}return n="Google Maps cannot find the searched location.",console.error(r),console.log("ERROR:",n),this.props.handleErrorChange(n),e.abrupt("return");case 15:this.props.fetchResults(i);case 16:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleErrorChange,n=this.state,i=n.suggestions,o=n.value,s={renderInputComponent:re,suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,renderSuggestion:oe,getSuggestionValue:ie,handleErrorChange:a,highlightFirstSuggestion:!0};return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inputContainer},r.a.createElement("form",{onSubmit:this.handleSubmit,id:"search-form"},r.a.createElement(Y.a,Object.assign({},s,{inputProps:{classes:t,id:"autosuggest",placeholder:"Search restaurants...",value:o,onChange:this.onChange},theme:{container:t.container,suggestionsContainerOpen:t.suggestionsContainerOpen,suggestionsList:t.suggestionsList,suggestion:t.suggestion,suggestionsContainer:t.suggestionsContainer},renderSuggestionsContainer:function(e){return r.a.createElement($.a,Object.assign({},e.containerProps,{square:!0}),e.children)}})))),r.a.createElement("div",{className:t.searchButton},r.a.createElement(ee.a,{onClick:this.handleSubmit,form:"search-form",variant:"contained",color:"primary"},r.a.createElement(ae.a,null),r.a.createElement("span",{className:t.searchText},"Search"))))}}]),t}(n.Component),ce=Object(ne.a)(function(e){return{root:{display:"grid",width:"100%",gridTemplateColumns:"75% 25%",gridTemplateRows:"100%","@media (max-width: 960px)":{width:"100%",display:"grid",gridTemplateColumns:"80.5% 19.5%",gridTemplateRows:"100%"}},input:{maxHeight:"56px",height:"1vh"},container:{position:"relative"},suggestionsContainer:{"@media (max-width: 600px)":{width:"95vw"}},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},suggestion:{display:"block","@media (max-width: 600px)":{"& > *":{fontSize:"12px"}}},suggestionsList:{margin:0,padding:0,listStyleType:"none"},searchButton:{gridRow:"1 / 2",gridColumn:"2 / 3",padding:"0 10px","& button":{width:"100%",height:"100%"},"@media (max-width: 960px)":{padding:"0 0 0 5px","& button":{minWidth:"auto",height:"100%",marginLeft:"auto"}}},searchText:{marginLeft:"5%",fontSize:"12px","@media (max-width: 960px)":{display:"none"}},inputContainer:{width:"100%",gridRow:"1 / 2",gridColumn:"1 / 2"}}})(se),le=a(98),ue=a.n(le),de=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.submitMyLocation;return r.a.createElement("div",{className:t.root},r.a.createElement(ee.a,{onClick:a,className:t.myLocationButton,variant:"contained",color:"primary"},r.a.createElement(ue.a,null),r.a.createElement("span",{className:t.myLocationButtonText},"My Location")))}}]),t}(n.Component),pe=Object(C.a)({root:{width:"100%",height:"100%",padding:"0","@media (max-width: 960px)":{marginRight:"5px"}},myLocationButton:{width:"100%",height:"100%","@media (max-width: 960px)":{marginRight:"5px"}},myLocationButtonText:{marginLeft:"5%",whiteSpace:"nowrap",fontSize:"12px","@media (max-width: 960px)":{fontSize:"0.7rem"}}})(de),me=a(212),he=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.fetchResults,n=e.submitMyLocation,i=e.handleShowMap,o=e.handleErrorChange,s=e.showMap;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.searchBox},r.a.createElement(ce,{fetchResults:a,handleErrorChange:o})),r.a.createElement("div",{className:t.myLocationButton},r.a.createElement(pe,{submitMyLocation:n})),r.a.createElement("div",{className:t.showMapButton},r.a.createElement("span",null,"Show Map"),r.a.createElement(me.a,{color:"primary",value:s,onChange:i,checked:s})))}}]),t}(n.Component),ge=Object(C.a)({root:{width:"100%",display:"grid",gridTemplateColumns:"80% 20%",gridTemplateRows:"100%",backgroundColor:"white","@media (max-width: 960px)":{width:"95vw",display:"grid",gridTemplateColumns:"repeat(10, 10%)",gridTemplateRows:"55% 45%",rowGap:"7px",position:"fixed",top:0,left:0,marginTop:"10px",marginLeft:"2.5vw"}},searchBox:{gridRow:"1 / 2",gridColumn:"1 / 2","@media (max-width: 960px)":{gridRow:"1 / 2",gridColumn:"1 / -1"}},myLocationButton:{gridRow:"1 / 2",gridColumn:"2 / 3","@media (max-width: 960px)":{gridRow:"2 / 3",gridColumn:"1 / span 5",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},showMapButton:{display:"none","@media (max-width: 960px)":{gridRow:"2 / 3",gridColumn:"span 5 / -1",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",fontSize:"0.7rem",fontWeight:500,textTransform:"uppercase",padding:"0 10px",border:"1px solid lightgrey",borderRadius:"4px",marginLeft:"5px"}}})(he),fe=a(213),xe=a(207),be=a(215),we=a(208),ve=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(x.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.error,a=t.message,n=t.show,i=e.handleDialogClose,o=e.classes;return r.a.createElement("div",{className:o.root},r.a.createElement(fe.a,{open:n,onClose:i,className:o.dialog},r.a.createElement(xe.a,{className:o.dialogContent},r.a.createElement(be.a,{id:"alert-dialog-description",className:o.dialogContentText},a)),r.a.createElement(we.a,{className:o.dialogActions},r.a.createElement(ee.a,{onClick:i,variant:"outlined",color:"secondary"},"OKAY"))))}}]),t}(n.Component),ye=Object(C.a)({dialog:{marginTop:"10px"},dialogContentText:{margin:"10px 0 10px 0","@media (max-width: 600px)":{fontSize:"14px"}},dialogActions:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",padding:"0 0 15px 0"}})(ve),Oe=0;function je(e){var t=e.lat,a=e.lng;return new Promise(function(e,n){U.a.get("/yelp/".concat(t,"/").concat(a,"/").concat(Oe)).then(function(t){var a=t.data.data.search.business.map(function(e){var t=e.name,a=e.rating,n=e.photos,r=e.location.formatted_address,i=e.price,o=e.review_count,s=e.coordinates,c=(e.display_phone,e.categories.map(function(e){return e.title}).join(" \xb7 "));return{name:t,rating:a,photos:n,address:r.replace(/\n/g,", "),coordinates:s,price:i,review_count:o,tags:c}});e(a)}).catch(function(e){return n(e)})})}var Ce=a(56);function Ee(){var e=Object(b.a)(["@media (max-width: 960px) {","}"]);return Ee=function(){return e},e}function Re(){var e=Object(b.a)(["@media (max-width: 960px) {","}"]);return Re=function(){return e},e}var Se=Ce.a.div(Re(),function(e){return e.displayMap}),ke=Ce.a.div(Ee(),function(e){return e.displayResults}),Ne=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(g.a)(t).call(this,e))).state={mapsApiKey:"",restaurants:[],coordinates:{lat:36.778261,lng:-119.4179324},resultsArea:"startsearch",showMap:!1,error:{message:"",show:!1}},a.fetchResults=a.fetchResults.bind(Object(f.a)(a)),a.submitMyLocation=a.submitMyLocation.bind(Object(f.a)(a)),a.handleShowMap=a.handleShowMap.bind(Object(f.a)(a)),a.handleErrorChange=a.handleErrorChange.bind(Object(f.a)(a)),a.handleDialogClose=a.handleDialogClose.bind(Object(f.a)(a)),a}return Object(x.a)(t,e),Object(m.a)(t,[{key:"fetchResults",value:function(){var e=Object(d.a)(c.a.mark(function e(t){var a,n,r,i,o,s;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(function(e){return Object(u.a)({},e,{resultsArea:"loading",showMap:!1})}),a=t.geometry.location,e.next=4,Object(w.a)(je(a));case 4:if(o=e.sent,s=Object(l.a)(o,2),r=s[0],i=s[1]){e.next=16;break}return n="Yelp API not working.",console.error(r),console.log("ERROR:",n),this.handleErrorChange(n),e.abrupt("return");case 16:if(0!==i.length){e.next=24;break}return n="Unable to find restaurants in the searched location.",console.error(r),console.log("ERROR:",n),this.handleErrorChange(n),e.abrupt("return");case 24:this.setState(function(e){return Object(u.a)({},e,{restaurants:i,coordinates:a,resultsArea:"results"})});case 25:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"submitMyLocation",value:function(){var e=Object(d.a)(c.a.mark(function e(){var t,a,n,r,i,o,s,d;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState(function(e){return Object(u.a)({},e,{resultsArea:"loading",showMap:!1})}),e.next=3,Object(w.a)(new Promise(function(e,t){navigator.geolocation.getCurrentPosition(function(t){e({lat:t.coords.latitude,lng:t.coords.longitude})},function(e){t("ERROR(".concat(e.code,"): ").concat(e.message))},{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}));case 3:if(i=e.sent,o=Object(l.a)(i,2),a=o[0],n=o[1]){e.next=15;break}return t="Unable to fetch your location.",console.error(a),console.log("ERROR:",t),this.handleErrorChange(t),e.abrupt("return");case 15:this.setState(function(e){return Object(u.a)({},e,{coordinates:n})});case 16:return e.next=18,Object(w.a)(je(n));case 18:if(s=e.sent,d=Object(l.a)(s,2),a=d[0],r=d[1]){e.next=30;break}return t="Yelp API not working.",console.error(a),console.log("ERROR:",t),this.handleErrorChange(t),e.abrupt("return");case 30:if(0!==r.length){e.next=38;break}return t="Unable to find restaurants in your current location. Try searching in some other location.",console.error(a),console.log("ERROR:",t),this.handleErrorChange(t),e.abrupt("return");case 38:this.setState(function(e){return Object(u.a)({},e,{restaurants:r,resultsArea:"results"})});case 39:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleShowMap",value:function(e,t){this.setState(function(e){return Object(u.a)({},e,{showMap:t})})}},{key:"handleErrorChange",value:function(e){this.setState(function(t){return Object(u.a)({},t,{restaurants:[],resultsArea:"startsearch",error:{message:e,show:!0}})})}},{key:"handleDialogClose",value:function(){this.setState(function(e){return Object(u.a)({},e,{error:{message:"",show:!1}})})}},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.restaurants,n=t.coordinates,i=t.resultsArea,o=t.showMap,s=t.error,c=o?"":"display: none;",l=o?"display: none;":"";return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.header},r.a.createElement(ge,{fetchResults:this.fetchResults,submitMyLocation:this.submitMyLocation,handleShowMap:this.handleShowMap,showMap:o,handleErrorChange:this.handleErrorChange})),r.a.createElement("div",{className:e.fixedDiv}),r.a.createElement(Se,{className:e.map,displayMap:c},r.a.createElement(P,{results:a,center:n,zoom:13,apiKey:"AIzaSyDAQOhuvUriLPgDzVblnSSH7BUj-s2EMSw"})),r.a.createElement(ke,{className:e.results,displayResults:l},r.a.createElement(z,{results:a,resultsArea:i})),r.a.createElement(ye,{error:s,handleDialogClose:this.handleDialogClose}))}}]),t}(n.Component),Te=Object(C.a)({root:{display:"grid",height:"100vh",borderTop:"1px solid lightgrey",gridTemplateRows:"90px 1fr",gridTemplateColumns:"30vw 70vw","@media (max-width: 960px)":{width:"100vw",display:"grid",gridTemplateRows:"100vh",gridTemplateColumns:"100vw"}},header:{gridRow:"1 / 2",gridColumn:"2 / 3",margin:"auto 20px",zIndex:100},results:{gridRow:"1 / 3",gridColumn:"1 / 2",zIndex:0,"@media (max-width: 960px)":{marginTop:"120px",width:"100vw",gridRow:"1 / -1",gridColumn:"1 / -1"}},map:{gridRow:"2 / 3",gridColumn:"2 / 3",zIndex:0,"@media (max-width: 960px)":{marginTop:"120px",width:"100vw",gridRow:"1 / -1",gridColumn:"1 / -1"}},fixedDiv:{display:"none",zIndex:1,"@media (max-width: 960px)":{display:"block",position:"fixed",top:0,left:0,height:"120px",width:"100vw",backgroundColor:"white",boxShadow:"0px 1px 3px 1px rgba(0,0,0,0.15)"}}})(Ne);a(166);o.a.render(r.a.createElement(Te,null),document.getElementById("root"))}},[[106,1,2]]]);
//# sourceMappingURL=main.3a3e3bbe.chunk.js.map